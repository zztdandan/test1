## 模拟数据说明

潘智 20190312

1. 运行 npm run dev 或者 npm run dev-local 后，会启动本地服务，同时提供代理功能和本地模拟数据功能，优先使用模拟功能，没有找到对应的模拟规则才会走代理到真实后台服务（可以是本机的后台或远程的后台，根据配置文件里的**PROXY_API_IP**设置）
2. **模拟数据路径规则**：根据访问路径(如/api/admin/sys/user/info),则在根目录下查找/mock/api/admin/sys/user/info.js，没有找到则找/api/admin/sys/user/info.json，如找到 js 文件，则获取 import 该 js 文件后执行 callback(req,res)函数的值；如果是 json 文件则读取该文件并转换成 json。将前面的数据执行 mock 后返给前端。**注：mock 后，数据变成动态的，具体 mock 语法，参考[mock 官网例子](http://mockjs.com/examples.html)**
3. **js 文件要求：** 要求 js 文件一定要导出 export callback 函数，如下，根据 type 返回不同的值

```
exports.callback = (req, res) => {
  let menu = ["first", "second", "third"];
  let type = req.query["type"] || 0;
  return menu[type] || [];
};
```

4. **json 文件要求：** 要求 json 文件是对象或者数组,如下(静态数据，每次访问都一样)：

```
[
  {
    "auth_id": "do1",
    "auth_name": "某个权限",
    "auth_allow": true
  },
  {
    "auth_id": "aa/add",
    "auth_name": "aa/添加"
  }
]
```

或者（动态数据，返回 data 随机在 100~150 行，里面的属性值每次都不同）

```
{
  "data|100-150": [
    {
      "id|+1": 1001,
      "name": "@id()",
      "age|1-100": 10,
      "sex|1": ["男", "女"],
      "star|1-5": "★",
      "address": "@county(true)",
      "email": "@email()"
    }
  ]
}
``
```
